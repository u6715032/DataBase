<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Login â€¢ Library System</title>
    <link rel="stylesheet" href="styles/demo1.css" />
  </head>
  <body>
    <main class="container" aria-labelledby="pageTitle">
      <header class="header">
        <div class="logo" aria-hidden="true">LS</div>
        <div>
          <h1 id="pageTitle">Library System â€” Login</h1>
          <p class="lead">Sign in to your account (Staff / Admin / Member)</p>
        </div>
      </header>

      <form id="loginForm" onsubmit="return handleLogin(event)" novalidate>
        <div class="form-group">
          <label for="email">Email or Username</label>
          <input
            id="email"
            name="email"
            type="text"
            inputmode="email"
            autocomplete="username"
            required
            placeholder="you@example.com or username"
          />
        </div>

        <div class="form-group">
          <label for="password">Password</label>
          <div style="position: relative">
            <input
              id="password"
              name="password"
              type="password"
              autocomplete="current-password"
              required
              placeholder="Enter your password"
            />
            <button
              id="togglePassword"
              type="button"
              class="toggle-eye"
              aria-label="Show password"
              aria-pressed="false"
              style="
                position: absolute;
                right: 8px;
                border: 0;
                background: transparent;
                cursor: pointer;
                color: var(--muted);
              "
            ></button>
          </div>
        </div>

        <div class="form-group row" style="margin-top: 16px">
          <button class="btn" type="submit">Login</button>
          <a class="btn ghost" href="register.html" role="button">Register</a>
        </div>

        <p class="helper">
          <a class="inline-link" href="forgot.html">Forgot password?</a>
        </p>

        <div id="msg" role="status" aria-live="polite" class="note"></div>
      </form>

      <p class="footer">Developed for CSX3006 â€” Library Management System</p>
    </main>

    <script>
      const passwordInput = document.getElementById("password");
      const toggleBtn = document.getElementById("togglePassword");

      // Keep button icon/labels in sync with the input's current type.
      function updateToggle() {
        const isHidden = passwordInput.type === "password"; // true when hidden
        // Use an eye for 'show' and a covering-eyes emoji for 'hide'
        toggleBtn.textContent = isHidden ? "ðŸ™ˆ" : "ðŸ™‰";
        toggleBtn.setAttribute(
          "aria-label",
          isHidden ? "Show password" : "Hide password"
        );
        // aria-pressed = true when password is visible
        toggleBtn.setAttribute("aria-pressed", (!isHidden).toString());
      }

      // Toggle handler toggles the input type then updates UI/ARIA
      toggleBtn.addEventListener("click", () => {
        passwordInput.type =
          passwordInput.type === "password" ? "text" : "password";
        updateToggle();
      });

      // initialize on load in case input type was changed elsewhere
      updateToggle();

      async function handleLogin(e) {
        e.preventDefault();
        const email = document.getElementById("email").value.trim();
        const password = document.getElementById("password").value;
        const msg = document.getElementById("msg");
        msg.textContent = "";
        if (!email || !password) {
          msg.textContent = "Please fill both fields.";
          msg.className = "error";
          return false;
        }

        // demo behaviour: simulate login success for any values
        msg.textContent = "Logging inâ€¦";
        msg.className = "note";
        // Simulate async call
        setTimeout(() => {
          // In real app, call your API and then redirect based on role.
          msg.textContent =
            "Login successful â€” redirecting to dashboard (demo).";
          msg.className = "success";
          // example redirect:
          // window.location.href = '/staff/dashboard.html';
        }, 800);

        return false;
      }
    </script>
  </body>
</html>
